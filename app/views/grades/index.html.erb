<div class="p-5 rounded">
  <h1>ランキング</h1>
</div>

<%= render 'layouts/flash_messages' %>

<div class="container container-fluid">
    <div class="table-responsive">
    <table id="ranking" class="table table-striped table-bordered table-hover mytable">
            <thead>
                <th>名前</th>
                <th>A+</th>
                <th>A</th>
                <th>B</th>
                <th>C</th>
                <th>D</th>
                <th>F</th>
                <th>GPA</th>
                <th>研究室</th>
            </thead>
            <tbody>
            <% @grades.each do |grade|  %>
                <% if signed_in? and grade[:user_id] == current_user[:id] %>
                <tr class="table-primary">
                <% else %>
                <tr>
                <% end %>
                    <td><%= grade.user[:username] %></td>
                    <td><%= grade.AA %></td>
                    <td><%= grade.A %></td>
                    <td><%= grade.B %></td>
                    <td><%= grade.C %></td>
                    <td><%= grade.D %></td>
                    <td><%= grade.F %></td>
                    <td><%= grade.GPA %></td>
                    <td><%= grade.user[:lab] %></td>
                </tr>
            <% end %>
            </tbody>
    </table>
    </div>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $.extend( $.fn.dataTable.defaults, {
        language: {
            url: "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Japanese.json"
        }
    });
    $('#ranking').DataTable({
        // searching: false,
        autoWidth: true,
        // scrollX: true,
        order: [[1, 'desc'], [2, 'desc'], [3, 'desc'], [4, 'desc'], [5, 'desc'], [6, 'desc']],
        columnDefs: [
            { targets: 1, orderData: [1, 2, 3, 4, 5, 6] },
            { targets: 2, orderData: [2, 1, 3, 4, 5, 6] },
            { targets: 3, orderData: [3, 1, 2, 4, 5, 6] },
            { targets: 4, orderData: [4, 1, 2, 3, 5, 6] },
            { targets: 5, orderData: [5, 1, 2, 3, 4, 6] },
            { targets: 6, orderData: [6, 1, 2, 3, 4, 5] },
            { targets: 7, orderData: [7, 1, 2, 3, 4, 5, 6] },
            { targets: 8, orderData: [8, 1, 2, 3, 4, 5, 6] }
        ],
    });
  });
</script>
